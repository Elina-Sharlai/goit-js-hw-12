{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49463022-6605d945f5c005b9dcffc2690';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: perPage,\n        page,\n    };\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?`, { params });\n        return response.data;\n    } catch (error) {\n        console.error(error.message);\n        throw error;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\n\nexport function renderGallery(images, append = false) {\n\tconst gallery = document.querySelector('.gallery');\n\tconst markup = images\n\t\t.map(\n\t\t\t({\n\t\t\t\twebformatURL,\n\t\t\t\tlargeImageURL,\n\t\t\t\ttags,\n\t\t\t\tlikes,\n\t\t\t\tviews,\n\t\t\t\tcomments,\n\t\t\t\tdownloads,\n\t\t\t}) =>\n\t\t\t\t`<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n            />\n          </a>\n          <div class=\"info\">\n            <p><b>Likes:</b> ${likes}</p>\n            <p><b>Views:</b> ${views}</p>\n            <p><b>Comments:</b> ${comments}</p>\n            <p><b>Downloads:</b> ${downloads}</p>\n          </div>\n        </li>`\n\t\t)\n\t\t.join('');\n\tif (append) {\n\t\tgallery.insertAdjacentHTML('beforeend', markup);\n\t} else {\n\t\tgallery.innerHTML = markup;\n\t}\n\n\tif (!lightbox) {\n\t\tlightbox = new SimpleLightbox('.gallery a', {\n\t\t\tcaptionsData: 'alt',\n\t\t\tcaptionDelay: 250,\n\t\t});\n\t} else {\n\t\tlightbox.refresh();\n\t}\n}\nexport function clearGallery() {\n\tdocument.querySelector('.gallery').innerHTML = '';\n}\nexport function toggleButton(show) {\n\tconst loadMoreButton = document.querySelector('#loadBtn');\n\tloadMoreButton.style.display = show ? 'block' : 'none';\n}\nexport function toggleLoader(show) {\n\tconst loader = document.querySelector('.loader');\n\tloader.style.display = show ? 'inline-block' : 'none';\n}\nexport function scrollToNewImages() {\n\tconst firstCard = document.querySelector('.gallery .gallery-item');\n\tif (firstCard) {\n\t\tconst { height: cardHeight } = firstCard.getBoundingClientRect();\n\t\twindow.scrollBy({\n\t\t\ttop: cardHeight * 2,\n\t\t\tbehavior: 'smooth',\n\t\t});\n\t}\n}","import { fetchImages } from './js/pixabay-api.js';\nimport {\n    renderGallery,\n    clearGallery,\n    toggleLoader,\n    toggleButton,\n    scrollToNewImages,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#formImg');\nconst searchInput = document.querySelector('#searchImg');\nconst loadMoreButton = document.querySelector('#loadBtn');\n\nlet query = '';\nlet currentPage = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\niziToast.settings({\n    position: 'topRight',\n});\n\nfunction handleData(data, append = false) {\n    if (data.hits.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: 'No images found!',\n        });\n        return;\n    }\n\n    renderGallery(data.hits, append);\n    totalHits = data.totalHits;\n\n    if (currentPage * perPage >= totalHits) {\n        iziToast.info({\n            title: 'Info',\n            message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        toggleButton(false);\n    } else {\n        toggleButton(true);\n\n    }\n}\n\n\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    query = searchInput.value.trim();\n    if (!query) {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search term!',\n        });\n        return;\n    }\n\n    form.reset();\n    clearGallery();\n    toggleLoader(true);\n    toggleButton(false);\n    currentPage = 1;\n    totalHits = 0;\n\n    try {\n        const data = await fetchImages(query, currentPage, perPage);\n        toggleLoader(false);\n        handleData(data);\n    } catch (error) {\n        toggleLoader(false);\n        iziToast.error({ title: 'Error', message: 'Something went wrong.' });\n    }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage++;\n    toggleLoader(true);\n\n    try {\n        const data = await fetchImages(query, currentPage, perPage);\n        toggleLoader(false);\n\n        handleData(data, true);\n        scrollToNewImages();\n    } catch (error) {\n        toggleLoader(false);\n        iziToast.error({ title: 'Error', message: 'Something went wrong.' });\n    }\n});\n\n"],"names":["API_KEY","fetchImages","query","page","perPage","params","axios","error","lightbox","renderGallery","images","append","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","toggleButton","show","loadMoreButton","toggleLoader","loader","scrollToNewImages","firstCard","cardHeight","form","searchInput","currentPage","totalHits","iziToast","handleData","data","event"],"mappings":"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"}