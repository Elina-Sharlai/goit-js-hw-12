{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49463022-6605d945f5c005b9dcffc2690';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n};\n\nexport default async function getPhotos(query, limit, page) {\n    const result = await axios.get('', {\n        params: {\n            q: query,\n            per_page: limit,\n            page: page,\n        },\n    });\n\n    return result.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nlet galleryBox = new SimpleLightbox('.gallery a', {\n\tcaptionsData: 'alt',\n\tcaptionPosition: 'bottom',\n\tcaptionDelay: 250,\n});\n\ngalleryBox.on('error.simplelightbox', function (e) {\n\tconsole.log(e);\n});\n\nexport function renderContent(data) {\n\tconst markup = data\n\t\t.map(\n\t\t\t({\n\t\t\t\twebformatURL,\n\t\t\t\tlargeImageURL,\n\t\t\t\ttags,\n\t\t\t\tlikes,\n\t\t\t\tviews,\n\t\t\t\tcomments,\n\t\t\t\tdownloads,\n\t\t\t}) => {\n\t\t\t\treturn `<li class=\"img-card\">\n\t\t\t\t<a href=\"${largeImageURL}\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass=\"img\"\n\t\t\t\t\t\tsrc=\"${webformatURL}\"\n\t\t\t\t\t\talt=\"${tags}\"\n\t\t\t\t\t\twidth=\"360\"\n\t\t\t\t\t\theight=\"200\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"img-data-container\">\n\t\t\t\t\t\t<ul class=\"data\">\n\t\t\t\t\t\t\t<li class=\"data-item\">\n\t\t\t\t\t\t\t\t<b class=\"data-title\">Likes</b>\n\t\t\t\t\t\t\t\t<p class=\"data-value\" data-likes>${likes}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"data-item\">\n\t\t\t\t\t\t\t\t<b class=\"data-title\">Views</b>\n\t\t\t\t\t\t\t\t<p class=\"data-value\" data-views>${views}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"data-item\">\n\t\t\t\t\t\t\t\t<b class=\"data-title\">Comments</b>\n\t\t\t\t\t\t\t\t<p class=\"data-value\" data-comments>${comments}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"data-item\">\n\t\t\t\t\t\t\t\t<b class=\"data-title\">Downloads</b>\n\t\t\t\t\t\t\t\t<p class=\"data-value\" data-downloads>${downloads}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n      </li>`;\n\t\t\t}\n\t\t)\n\t\t.join('');\n\n\tgallery.insertAdjacentHTML('beforeend', markup);\n\n\tgalleryBox.refresh();\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getPhotos from './js/pixabay-api';\nimport { renderContent } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more-btn');\n\nlet limit = 15;\nlet page = 1;\nlet lastQuery;\nlet totalCountOfResult;\n\nloadBtn.classList.add('hidden');\n\niziToast.settings({\n    position: 'topRight',\n});\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n    gallery.innerHTML = '';\n\n    const query = form.querySelector('.form-input').value.trim();\n\n    if (query === '') {\n        iziToast.error({\n            message: 'Query is not valid!',\n        });\n        return;\n    }\n\n    if (query !== lastQuery) {\n        lastQuery = query;\n        page = 1;\n    }\n\n    loader.classList.add('start');\n\n    try {\n        const data = await getPhotos(query, limit, page);\n        totalCountOfResult = data.totalHits;\n        if (data) {\n            renderContent(data.hits);\n        }\n        if (data.hits.length < limit) {\n            loadBtn.classList.add('hidden');\n        } else {\n            loadBtn.classList.remove('hidden');\n        }\n    } catch (error) {\n        iziToast.error({\n            message: error.message,\n        });\n    }\n\n    loader.classList.remove('start');\n\n    form.reset();\n});\n\nloadBtn.addEventListener('click', async () => {\n    loadBtn.classList.add('hidden');\n    loader.classList.add('start');\n\n    page += 1;\n\n    try {\n        const data = await getPhotos(lastQuery, limit, page);\n        if (data) {\n            renderContent(data.hits);\n            scrollDown('.img-card', 3);\n        }\n\n        if (data.hits.length < limit) {\n            loadBtn.classList.add('hidden');\n        } else {\n            loadBtn.classList.remove('hidden');\n        }\n\n        if (page > Math.ceil(totalCountOfResult / limit)) {\n            loader.classList.remove('start');\n\n            return iziToast.error({\n                message: \"We're sorry, there are no more posts to load\",\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            message: error.message,\n        });\n    }\n\n    loader.classList.remove('start');\n});\n\nfunction scrollDown(itemSelector, countOfItem) {\n    const item = document.querySelector(itemSelector);\n    const itemHeight = item.getBoundingClientRect().height;\n    window.scrollBy({\n        top: itemHeight * countOfItem,\n        behavior: 'smooth',\n    });\n}"],"names":["API_KEY","axios","getPhotos","query","limit","page","gallery","galleryBox","SimpleLightbox","e","renderContent","data","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loader","loadBtn","lastQuery","totalCountOfResult","iziToast","event","error","scrollDown","itemSelector","countOfItem","itemHeight"],"mappings":"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"}